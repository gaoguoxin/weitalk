// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// compiled file.
//
// Read Sprockets README (https://github.com/sstephenson/sprockets#sprockets-directives) for details
// about supported directives.
//
//= require jquery
//= require jquery_ujs
//= require turbolinks
//= require_tree .

		$(document).ready(function() {
			var talk1 = "<%= asset_path('talk1.png') %>";
			var talk2 = "<%= asset_path('talk2.png') %>";
			var talk3 = "<%= asset_path('talk3.png') %>";
			var talk4 = "<%= asset_path('talk4.png') %>";
			var talk5 = "<%= asset_path('talk5.png') %>";
			var talk6 = "<%= asset_path('talk6.png') %>";
			var talk7 = "<%= asset_path('talk7.png') %>";
			var talk8 = "<%= asset_path('talk8.png') %>";									
			$(".faceimg").each(function() {
	  			var w = $(this).width() ;
	  			$(this).css("height",w);
	  		});
			var timer;
			$("#player1")[0].ifplay=0;
			$("#player2")[0].ifplay=0;
			$("#player3")[0].ifplay=0;
			$("#player5")[0].ifplay=0;
			$("#player6")[0].ifplay=0;
			$("#player7")[0].ifplay=0;
			$("#player8")[0].ifplay=0;
			$("#player9")[0].ifplay=0;
			$("#player10")[0].ifplay=0;
			$("#player11")[0].ifplay=0;
			$("#player12")[0].ifplay=0;
			
			function init(){
				
				
				$("#audio1").attr("src",talk4)
				$("#audio2").attr("src",talk4)
				$("#audio3").attr("src",talk1)
				$("#audio5").attr("src",talk4)
				$("#audio6").attr("src",talk4)
				$("#audio7").attr("src",talk1)
				$("#audio8").attr("src",talk1)
				$("#audio9").attr("src",talk1)
				$("#audio10").attr("src",talk1)
				$("#audio11").attr("src",talk4)
				$("#audio12").attr("src",talk4)
			}
			function talking(s){
				if ($(s).attr("src")== talk1)
				{
					$(s).attr("src",talk2);
				}else if ($(s).attr("src")== talk2)
				{
					$(s).attr("src",talk3);
				}else if ($(s).attr("src")== talk3)
				{
					$(s).attr("src",talk1);
				}	
				if ($(s).attr("src")== talk4)
				{
					$(s).attr("src",talk5);
				}else if ($(s).attr("src")== talk5)
				{
					$(s).attr("src",talk6);
				}else if ($(s).attr("src")== talk6)
				{
					$(s).attr("src",talk4);
				}
			}
			function allstop(){
				$("#player1")[0].pause();$("#player1")[0].ifplay=0;
				$("#player2")[0].pause();$("#player2")[0].ifplay=0;
				$("#player3")[0].pause();$("#player3")[0].ifplay=0;
				$("#player5")[0].pause();$("#player5")[0].ifplay=0;
				$("#player6")[0].pause();$("#player6")[0].ifplay=0;
				$("#player7")[0].pause();$("#player7")[0].ifplay=0;
				$("#player8")[0].pause();$("#player8")[0].ifplay=0;
				$("#player9")[0].pause();$("#player9")[0].ifplay=0;
				$("#player10")[0].pause();$("#player10")[0].ifplay=0;
				$("#player11")[0].pause();$("#player11")[0].ifplay=0;
				$("#player12")[0].pause();$("#player12")[0].ifplay=0;
			}

			function doclick(num){
				var s="#audio"+num;
				var ss="#player"+num;
				$(s).click(function(event) {
		  			if ($(ss)[0].ifplay==0){
		  				allstop();
						clearInterval(timer);init();
						timer = setInterval(function(){talking(s)},300);
		  				$(ss)[0].play();
		  				$(ss)[0].ifplay=1;
		  			}else{
		  				allstop();
						clearInterval(timer);
						init();
		  			}
		  		});
			}
	  		for(var i=1;i<13;i++)
	  		{
	  			if (i != 4){
	  				doclick(i);
	  			}
	  		}

		});